__allow_extra__: true

devices:
  - tcp:
      name: plc
      host: 192.168.10.76
      port: 502
  - tcp:
      name: mcon.cityron
      host: 192.168.11.162
      port: 502
      
cityron_queries: &cityron_queries
  - {type: holding, reg_index: 0, reg_count: 10}
  - {type: holding, reg_index: 17, reg_count: 1}
  - {type: holding, reg_index: 20, reg_count: 3}

masters:
  - worker:
      name: fancoil.modbus.floor.2.switch.0
    device_name: mcon.cityron 
    slave_id: 11
    register_names: [cityron]
    queries: *cityron_queries

  - worker:
      name: plc.modbus
    device_name: plc
    slave_id: 11
    response_time_ms: 500  # (150). [has_default] 
    register_names: [plc]
    queries:
      - {type: holding, reg_index: 3000, reg_count: 8}

registers: 
  holding_registers:
    cityron:
      temperature:
        current: {index: 0, writable: false}
        target: {index: 1}   
        min_target: {index: 5}
        max_target: {index: 6}
        external: {index: 9}
      is_on: {index: 2}
      mode: 
        current: {index: 3}
        available_mask: {index: 17}
      speed: 
        vent: {index: 4}
      error:
        filter: {index: 7}
        not_displayed: {index: 8}
      time:
        hour: {index: 20, validator: hours}
        minute: {index: 21, validator: minutes}
        weekday: {index: 22, validator: weekday}
    plc:
      regulators: 
        1: {index: 3000}
        2: {index: 3001}
        3: {index: 3002}
        4: {index: 3003}
        5: {index: 3004}
        6: {index: 3005}
        7: {index: 3006}
        8: {index: 3007} 